function loadSearch(){$("#loading").hide(),sizeLayerControl();var e=new Bloodhound({name:"Groups",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name).concat(Bloodhound.tokenizers.whitespace(e.alias)).concat(Bloodhound.tokenizers.whitespace(e.simplename))},queryTokenizer:Bloodhound.tokenizers.whitespace,local:groupSearch,limit:10}),o=new Bloodhound({name:"Buildings",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name).concat(Bloodhound.tokenizers.whitespace(e.alias)).concat(Bloodhound.tokenizers.whitespace(e.address))},queryTokenizer:Bloodhound.tokenizers.whitespace,sorter:function(e,o){return e.name.localeCompare(o.name)},local:buildingSearch,limit:20}),a=new Bloodhound({name:"Units",datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name).concat(Bloodhound.tokenizers.whitespace(e.alias)).concat(Bloodhound.tokenizers.whitespace(e.web))},queryTokenizer:Bloodhound.tokenizers.whitespace,local:unitSearch,limit:20});e.initialize(),o.initialize(),a.initialize();var n=[{name:"Groups",displayKey:null,source:e.ttAdapter(),templates:{header:"<h4 class='typeahead-header'>Wydzia≈Çy</h4>",suggestion:Handlebars.compile(["<img src='assets/img/{{shortname}}.png' width='24' height='28'>&nbsp;{{name}}<br>"].join(""))}},{name:"Buildings",displayKey:null,source:o.ttAdapter(),templates:{header:"<h4 class='typeahead-header'>Budynki</h4>",suggestion:Handlebars.compile(["{{name}}<br>&nbsp;<small>{{address}}</small>"].join(""))}}];for(var i in groups)groups[i].bloodhound=new Bloodhound({name:this.name,datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name).concat(Bloodhound.tokenizers.whitespace(e.alias))},queryTokenizer:Bloodhound.tokenizers.whitespace,local:Object.values(groups[i].search),limit:10}),groups[i].bloodhound.initialize(),n.push({name:"Units",displayKey:null,source:groups[i].bloodhound.ttAdapter(),templates:{header:"<h4 class='typeahead-header'><img src='assets/img/"+groups[i].shortname+".png' width='24' height='28'>&nbsp;"+groups[i].simplename+"</h4>",suggestion:Handlebars.compile(["{{name}}"].join(""))}});$("#searchbox").typeahead({minLength:1,highlight:!0,hint:!1},n).on("typeahead:selected",(function(e,o){"buildings"===o.source?window[o.source][o.shortname].showOnMap(!0,!0,!0):"groups"===o.source?(map.removeLayer(active),map.addLayer(window[o.source][o.shortname].layer)):window[o.source][o.shortname].showOnMap(),$(".navbar-collapse").height()>50&&$(".navbar-collapse").collapse("hide")})).on("typeahead:opened",(function(){$(".navbar-collapse.in").css("max-height",$(document).height()-$(".navbar-header").height()),$(".navbar-collapse.in").css("height",$(document).height()-$(".navbar-header").height())})).on("typeahead:closed",(function(){$(".navbar-collapse.in").css("max-height",""),$(".navbar-collapse.in").css("height","")})),$(".twitter-typeahead").css("position","static"),$(".twitter-typeahead").css("display","block")}